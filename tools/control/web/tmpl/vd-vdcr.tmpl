Create New Virtual Disk
SECTION&XenoServers
BREADCRUMB&Virtual Disk Manager&vd.jsp

<!-- content -->
<img src="pixel.gif" class="block" width="1" height="12">

<table cellpadding="0" cellspacing="0" border="0">
<tbody>
INCLUDE&vdmenu.tmpl
<td valign="top">


<b>Create Virtual Disk Results</b>
<br>

<%
  HttpServletRequestWrapper hsrw = new HttpServletRequestWrapper(request);
  String size = null;
  String expiry_string = null;
  long expiry = 0;

  if (hsrw.getParameter("size") == null ||
      hsrw.getParameter("size").trim().equals(""))
  {
%>
Error: size not specified.<br>
<%
  }
  else if (hsrw.getParameter("expiry") == null ||
           hsrw.getParameter("expiry").trim().equals(""))
  {
%>
Error: expiry time not specified.<br>
<%
  }
  else
  {
    size = hsrw.getParameter("size").trim() +
           hsrw.getParameter("sizeunits").trim();

    try
    {
      expiry = Long.decode(hsrw.getParameter("expiry")).longValue(); 

      /* not perfect, but good enough for now... */
      if ( hsrw.getParameter("expiryunits").equals("d"))
      {
        expiry *= 24 * 60 * 60 * 1000;
      }
      else if ( hsrw.getParameter("expiryunits").equals("w"))
      {
        expiry *= 24 * 60 * 60 * 1000 * 7;
      }
      else if ( hsrw.getParameter("expiryunits").equals("m"))
      {
        expiry *= 24 * 60 * 60 * 1000 * 30;
      }
      else if ( hsrw.getParameter("expiryunits").equals("y"))
      {
        expiry *= 24 * 60 * 60 * 1000 * 365;
      }
      
      expiry += System.currentTimeMillis();
%>
output =<br>
<%= new CommandVdCreate( hsrw.getParameter("name"), Library.parseSize(size), new Date(expiry)).executeWeb() %>
<br>
<%
    }
    catch (NumberFormatException e)
    {
%>
Error: invalid expiry time specification.<br>
<%
    }
  }
%>

<%
  root.doFlushState();
%>

</td>
</tbody>
</table>




<!-- end content -->
